<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Overlord</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="menu-bar">
    <div class="menu-item" onclick="toggleMenu('file-menu')">
      File
      <div id="file-menu" class="dropdown-menu">
        <div class="dropdown-item" onclick="event.stopPropagation(); browseSubject(); closeAllMenus();">Choose Subject</div>
        <div class="dropdown-item" onclick="event.stopPropagation(); browseAnimations(); closeAllMenus();">Choose Animations</div>
        <div class="dropdown-item" onclick="event.stopPropagation(); browsePropAnimations(); closeAllMenus();">Choose Prop Animations</div>
        <div class="dropdown-item" onclick="event.stopPropagation(); browseGear(); closeAllMenus();">Choose Gear</div>
        <div class="dropdown-item" onclick="event.stopPropagation(); browseGearAnimations(); closeAllMenus();">Choose Gear Animations</div>
        <div class="dropdown-item" onclick="event.stopPropagation(); browseOutputDir(); closeAllMenus();">Choose Output Directory</div>
        <div class="dropdown-separator"></div>
        <div class="dropdown-item" onclick="event.stopPropagation(); showSettings(); closeAllMenus();">Settings</div>
        <div class="dropdown-separator"></div>
        <div class="dropdown-item" onclick="event.stopPropagation(); exitOverlord(); closeAllMenus();">Exit Overlord</div>
      </div>
    </div>
    <div class="menu-item" onclick="toggleMenu('edit-menu')">
      Edit
      <div id="edit-menu" class="dropdown-menu">
        <div class="dropdown-item" onclick="event.stopPropagation(); clearAllFields(); closeAllMenus();">Clear All Inputs</div>
        <div class="dropdown-item" onclick="event.stopPropagation(); restoreDefaults(); closeAllMenus();">Restore Default Settings</div>
      </div>
    </div>
    <div class="menu-item" onclick="toggleMenu('help-menu')">
      Help
      <div id="help-menu" class="dropdown-menu">
        <div class="dropdown-item" onclick="event.stopPropagation(); showOverlordLog(); closeAllMenus();">Show Overlord Log</div>
        <div class="dropdown-item" onclick="event.stopPropagation(); showIrayServerLog(); closeAllMenus();">Show Iray Server Log</div>
        <div class="dropdown-item" onclick="event.stopPropagation(); showDazStudioLog(); closeAllMenus();">Show DAZ Studio Log</div>
        <div class="dropdown-separator"></div>
        <div class="dropdown-item" onclick="event.stopPropagation(); showIrayServerInterface(); closeAllMenus();">Show Iray Server Interface</div>
        <div class="dropdown-separator"></div>
        <div class="dropdown-item" onclick="event.stopPropagation(); showAbout(); closeAllMenus();">About Overlord</div>
      </div>
    </div>
  </div>
  
  <div class="container">
    <div class="left-panel">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
        <h2 style="margin: 0;">Options</h2>
        <button onclick="clearAllFields()" class="btn-small">Clear All Inputs</button>
      </div>
      
      <div class="form-group">
        <label>Subject:</label>
        <div class="input-row">
          <input type="text" id="subject" placeholder="Path to subject .duf file" spellcheck="false">
          <button onclick="browseSubject()">Browse</button>
        </div>
      </div>
      
      <div class="form-group">
        <label>Animations:</label>
        <div class="input-row">
          <textarea id="animations" rows="3" placeholder="Paths to animation .duf files (one per line)" spellcheck="false" style="height: 70px; resize: vertical;"></textarea>
          <div style="display: flex; flex-direction: column; gap: 4px;">
            <button onclick="browseAnimations()">Browse</button>
            <button onclick="clearAnimations()">Clear</button>
          </div>
        </div>
      </div>
      
      <div class="form-group">
        <label>Prop Animations:</label>
        <div class="input-row">
          <textarea id="prop-animations" rows="3" placeholder="Paths to prop animation .duf files (one per line)" spellcheck="false" style="height: 70px; resize: vertical;"></textarea>
          <div style="display: flex; flex-direction: column; gap: 4px;">
            <button onclick="browsePropAnimations()">Browse</button>
            <button onclick="clearPropAnimations()">Clear</button>
          </div>
        </div>
      </div>
      
      <div class="form-group">
        <label>Gear:</label>
        <div class="input-row">
          <textarea id="gear" rows="3" placeholder="Paths to gear .duf files (one per line)" spellcheck="false" style="height: 70px; resize: vertical;"></textarea>
          <div style="display: flex; flex-direction: column; gap: 4px;">
            <button onclick="browseGear()">Browse</button>
            <button onclick="clearGear()">Clear</button>
          </div>
        </div>
      </div>
      
      <div class="form-group">
        <label>Gear Animations:</label>
        <div class="input-row">
          <textarea id="gear-animations" rows="3" placeholder="Paths to gear animation .duf files (one per line)" spellcheck="false" style="height: 70px; resize: vertical;"></textarea>
          <div style="display: flex; flex-direction: column; gap: 4px;">
            <button onclick="browseGearAnimations()">Browse</button>
            <button onclick="clearGearAnimations()">Clear</button>
          </div>
        </div>
      </div>
      
      <div class="form-group">
        <label>Output Directory:</label>
        <div class="input-row">
          <input type="text" id="output-dir" placeholder="Output directory for rendered images" spellcheck="false">
          <button onclick="browseOutputDir()">Browse</button>
        </div>
      </div>
      
      <div class="form-group">
        <div class="input-row" style="align-items: flex-end; gap: 16px;">
          <div style="flex: 0 0 auto;">
            <label>Instances:</label>
            <input type="number" id="instances" min="1" max="99" value="1" style="width: 60px;">
          </div>
          <div style="flex: 0 0 auto;">
            <label>Frame Rate:</label>
            <input type="number" id="frame-rate" min="1" max="999" value="30" style="width: 70px;">
          </div>
          <div style="flex: 0 0 auto;">
            <label>Cache (GB):</label>
            <input type="number" id="cache-threshold" min="5" max="999" value="10" style="width: 70px;">
          </div>
          <div style="flex: 1; display: flex; gap: 12px; align-items: flex-end;">
            <button id="start-btn" class="btn-primary" onclick="startRender()" style="flex: 1; padding: 8px 16px; font-weight: 600; font-family: 'Cinzel', serif;">Start Render</button>
            <button id="stop-btn" class="btn-danger" onclick="stopRender()" style="flex: 1; padding: 8px 16px; font-weight: 600; font-family: 'Cinzel', serif;">Stop Render</button>
          </div>
        </div>
      </div>
      
      <div class="progress-section">
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
      </div>
      
      <div style="display: flex; gap: 16px; margin-top: 24px;">
          <div style="flex: 1;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
            <h3 style="margin: 0;">Output Details</h3>
            <button onclick="showOutputFolder()" class="btn-small">Show Output Folder</button>
          </div>
          <div class="info-box">
            <div class="info-row">
              <span class="info-label">Images Completed this Session:</span>
              <span id="session-images">-</span>
            </div>
            <div class="info-row">
              <span class="info-label">Total Images Completed:</span>
              <span id="total-images">-</span>
            </div>
            <div class="info-row">
              <span class="info-label">Images Remaining:</span>
              <span id="images-remaining">-</span>
            </div>
            <div class="info-row">
              <span class="info-label">Estimated Completion at:</span>
              <span id="est-completion">-</span>
            </div>
          </div>
        </div>
        
        <div style="flex: 1;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
            <h3 style="margin: 0;">Last Rendered Image Details</h3>
            <button onclick="showImageInFolder()" class="btn-small">Show in Folder</button>
          </div>
          <div class="info-box">
            <div class="info-row">
              <span class="info-label">Name:</span>
              <span id="info-file">-</span>
            </div>
            <div class="info-row">
              <span class="info-label">Resolution:</span>
              <span id="info-resolution">-</span>
            </div>
            <div class="info-row">
              <span class="info-label">Size:</span>
              <span id="info-size">-</span>
            </div>
            <div class="info-row">
              <span class="info-label">Created at:</span>
              <span id="info-created">-</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="right-panel">
      <h2>Last Rendered Image</h2>
      
      <div class="image-preview" id="image-preview">
        <img src="images/noImagesFound.webp" alt="No images found">
      </div>
    </div>
  </div>

  <script src="renderer.js"></script>
</body>
</html>
